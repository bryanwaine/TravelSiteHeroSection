{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/macnwanne/Projects/next/TravelSiteHeroSection/app/components/TravelMap.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { MapContainer, TileLayer, Marker, Tooltip } from \"react-leaflet\";\nimport { useMap } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport { LatLngTuple } from \"leaflet\";\n\ninterface Destination {\n  id: number;\n  name: string;\n  country: string;\n  price: number;\n  duration: string;\n  image: string;\n  video: string;\n  position: LatLngTuple;\n  direction: string;\n  description: string;\n  highlights: string[];\n  temperature: number;\n}\n\ninterface TravelMapProps {\n  destinations: Destination[];\n  isMobile: boolean;\n  setSelectedDestination: (destination: Destination) => void;\n  setMobileBookingVisible: (visible: boolean) => void;\n  setDisplayBookingSummary: (visible: boolean) => void;\n  setDisplayBookingForm: (visible: boolean) => void;\n  setDisplayPaymentForm: (visible: boolean) => void;\n  setDisplaySuccessMessage: (visible: boolean) => void;\n}\n\ntype FitBoundsProps = {\n  positions: LatLngTuple[];\n};\n\nconst TravelMap: React.FC<TravelMapProps> = ({\n  destinations,\n  isMobile,\n  setSelectedDestination,\n  setMobileBookingVisible,\n  setDisplayBookingSummary,\n  setDisplayBookingForm,\n  setDisplayPaymentForm,\n  setDisplaySuccessMessage,\n}) => {\n  const [hoveredDestination, setHoveredDestination] = useState<number | null>(\n    null\n  );\n  const videoRefs = useRef<{ [key: number]: HTMLVideoElement }>({});\n\n  const customIcon = L.divIcon({\n    className: \"\", // prevent default Leaflet styles\n    html: `\n        <div class=\"relative w-12 h-12 \">\n          <!-- Pulsating background -->\n          <div class=\"absolute top-[-20px] left-[-12px] w-10 h-10 bg-[#6FA638]/30 rounded-full animate-ping\"></div>\n    \n          <!-- Location pin -->\n          <div class=\"absolute top-[-15px] left-[-5px] w-8 h-8\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"#6FA638\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-map-pin-icon lucide-map-pin\"><path d=\"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0\"/><circle cx=\"12\" cy=\"10\" r=\"3\"/></svg></div>\n        </div>\n      `,\n    iconSize: [24, 24],\n    iconAnchor: [12, 12],\n  });\n\n  const center: LatLngTuple = [20, 0];\n\n  const FitBoundsOnMobile = ({ positions }: FitBoundsProps) => {\n    const map = useMap();\n\n    useEffect(() => {\n      if (window.innerWidth <= 768 && positions.length) {\n        const bounds = L.latLngBounds(positions);\n        map.fitBounds(bounds, {\n          padding: [30, 30],\n          animate: true,\n        });\n      }\n    }, [map, positions]);\n\n    return null;\n  };\n\n  function CreateLeafletPane({\n    name,\n    zIndex = 800,\n  }: {\n    name: string;\n    zIndex?: number;\n  }) {\n    const map = useMap();\n\n    useEffect(() => {\n      if (!map.getPane(name)) {\n        map.createPane(name);\n      }\n\n      const pane = map.getPane(name);\n      if (pane) {\n        pane.style.zIndex = zIndex.toString();\n      }\n    }, [map, name, zIndex]);\n\n    return null;\n  }\n\n  return (\n    <MapContainer\n      center={center}\n      zoom={2}\n      scrollWheelZoom={true}\n      className=\" !relative !w-full !h-full !z-0 !rounded-3xl\"\n    >\n      <TileLayer\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a>'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n      <CreateLeafletPane name=\"tooltipPane\" zIndex={8000000000000} />\n\n      {destinations.map((dest, i) => (\n        <Marker\n          key={i}\n          position={dest.position}\n          icon={customIcon}\n          eventHandlers={{\n            click: () => {\n              setSelectedDestination(dest);\n              if (isMobile) {\n                setMobileBookingVisible(true);\n                setDisplayBookingSummary(true);\n                setDisplayBookingForm(false);\n                setDisplayPaymentForm(false);\n                setDisplaySuccessMessage(false);\n              }\n            },\n            mouseover: () => {\n              setHoveredDestination(dest.id);\n              if (videoRefs.current[dest.id]) {\n                videoRefs.current[dest.id].play();\n              }\n            },\n            mouseout: () => {\n              setHoveredDestination(null);\n              if (videoRefs.current[dest.id]) {\n                // videoRefs.current[dest.id].pause();\n                videoRefs.current[dest.id].currentTime = 0;\n              }\n            },\n          }}\n        >\n          {hoveredDestination === dest.id && !isMobile && (\n            <Tooltip\n              pane=\"tooltipPane\"\n              permanent\n              direction={dest.direction === \"top\" ? \"top\" : \"bottom\"}\n              offset={[0, dest.direction === \"top\" ? -25 : 5]}\n              interactive\n              opacity={1}\n              className={`${(hoveredDestination === dest.id && !isMobile) ? \"block\" : \"hidden\"}!p-0 !bg-transparent !border-0 !shadow-none !z-[99999999]`}\n            >\n              <div className=\"w-30 md:w-64 bg-white rounded-2xl shadow-lg overflow-hidden animate-scale-in !z-[99999999]\">\n                <video\n                  ref={(el) => {\n                    if (el) videoRefs.current[dest.id] = el;\n                  }}\n                  className=\"w-full h-15 md:h-32 object-cover rounded-t-2xl\"\n                  src={dest.video}\n                  autoPlay\n                  muted\n                  loop\n                  playsInline\n                />\n                <div className=\"py-1 px-2 md:p-4 \">\n                  <h3 className=\"font-bold text-[#3D592F] text-xs md:text-lg\">\n                    {dest.name}\n                  </h3>\n                  <p className=\"text-[#658C3E] text-[10px] md:text-sm\">\n                    {dest.country}\n                  </p>\n                  <div className=\"hidden md:flex items-center justify-between mt-2\">\n                    <span className=\"text-[#5EA4BF] font-semibold\">\n                      ${dest.price}\n                    </span>\n                    <span className=\"text-xs text-gray-500\">\n                      {dest.duration}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </Tooltip>\n          )}\n        </Marker>\n      ))}\n\n      {/* Auto-fit on mobile */}\n      <FitBoundsOnMobile positions={destinations.map((d) => d.position)} />\n    </MapContainer>\n  );\n};\n\nexport default TravelMap;\n"],"names":[],"mappings":"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","debugId":null}}]
}